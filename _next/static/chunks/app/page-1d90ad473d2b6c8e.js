(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1243:(e,a,t)=>{Promise.resolve().then(t.bind(t,6257))},6257:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var s=t(5155),n=t(2115),r=t(2001);class l{async dashboard(e){return(await (0,r.D)("/common/dashboard",e||{})).data}async calendar(e){return(await (0,r.D)("/common/calendar",e||{})).data}}let i=new l;var c=t(6472),o=t(5781),d=t(6709);o.t1.register(...o.$L);let u=()=>{let[e,a]=(0,n.useState)({monthlyData:Array.from({length:12},(e,a)=>({reserveMonth:(a+1).toString().padStart(2,"0"),sumPrice:0})),orderStateData:[{orderStateCount:0,orderStateCode:"예약중"},{orderStateCount:0,orderStateCode:"예약취소"},{orderStateCount:0,orderStateCode:"결제취소"},{orderStateCount:0,orderStateCode:"결제완료"}],totalPrice:0});(0,n.useEffect)(()=>{(async()=>{try{let e=await i.dashboard({});a({totalPrice:e.totalPrice,monthlyData:e.monthlyData,orderStateData:e.orderStateData})}catch(e){console.error(e)}})()},[]);let t=a=>{let t=e.orderStateData.find(e=>e.orderStateCode===a);return t?t.orderStateCount:0},r=(0,n.useMemo)(()=>({labels:e.monthlyData.map(e=>e.reserveMonth),datasets:[{label:"매출",data:e.monthlyData.map(e=>e.sumPrice),borderColor:"#9f7aea",backgroundColor:"rgba(159, 122, 234, 0.5)",fill:!0}]}),[e.monthlyData]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{}),(0,s.jsxs)("div",{id:"main",children:[(0,s.jsx)("ul",{className:"orderState",children:["예약중","예약취소","결제취소","결제완료"].map(e=>(0,s.jsxs)("li",{className:e,children:[(0,s.jsx)("p",{className:"codeName",children:e}),(0,s.jsx)("p",{className:"count",children:t(e)})]},e))}),(0,s.jsx)("div",{style:{width:"100%",padding:"10px 0 20px 0",overflow:"auto"},children:(0,s.jsx)(c.N1,{data:r,options:{responsive:!0,maintainAspectRatio:!1}})}),(0,s.jsxs)("div",{className:"totalPrice",children:["총 매출: ",e.totalPrice]})]})]})}},7631:(e,a,t)=>{"use strict";t.d(a,{r:()=>n});var s=t(6046);let n=()=>{let{push:e,...a}=(0,s.useRouter)(),t=(0,s.useSearchParams)();return{...a,push:a=>{let{pathname:s,query:n}=a;n||(n={});let r=t.get("o");r&&(n.o=r);let l=t.get("r");l&&(n.r=l);let i=new URLSearchParams(n).toString();e("".concat(s,"?").concat(i))}}}},6709:(e,a,t)=>{"use strict";t.d(a,{A:()=>o});var s=t(5155),n=t(2115),r=t(7631),l=t(7876),i=t(2838);let c=e=>{let{width:a=140,height:t=59}=e;return(0,s.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:a,height:t,viewBox:"0 0 342.000000 145.000000",preserveAspectRatio:"xMidYMid meet",children:(0,s.jsxs)("g",{transform:"translate(0.000000,145.000000) scale(0.100000,-0.100000)",fill:"none",stroke:"none",children:[(0,s.jsx)("path",{d:"M1295 1435 c-291 -54 -552 -277 -791 -675 -39 -64 -76 -130 -83 -148 -7 -17 -17 -32 -22 -32 -5 0 -9 101 -9 225 l0 225 -195 0 -195 0 0 -515 0 -515 198 0 197 0 -3 206 c-2 114 1 203 6 200 5 -3 46 -95 92 -206 l84 -200 199 0 c109 0 197 4 195 8 -2 5 -50 118 -108 251 l-104 242 23 67 c35 100 142 316 203 407 29 44 93 121 143 171 248 249 531 279 847 88 70 -43 72 -43 33 -9 -59 50 -197 131 -286 165 -87 33 -226 60 -303 59 -28 0 -82 -7 -121 -14z",fill:"#ff0000"}),(0,s.jsx)("path",{d:"M2282 851 c-101 -35 -132 -85 -132 -213 0 -140 13 -155 233 -287 96 -58 107 -73 107 -150 0 -69 -45 -104 -84 -65 -12 11 -16 36 -16 90 l0 74 -121 0 -122 0 7 -81 c8 -96 23 -138 62 -168 56 -44 89 -51 238 -51 134 0 143 2 191 28 74 40 87 71 83 207 -3 94 -6 115 -26 147 -23 38 -109 99 -219 157 -75 40 -92 58 -100 105 -7 46 17 86 52 86 30 0 45 -31 45 -91 l0 -39 115 0 115 0 0 54 c0 80 -10 114 -42 146 -64 65 -268 92 -386 51z",fill:"#000"}),(0,s.jsx)("path",{d:"M1226 828 c-3 -13 -24 -144 -46 -293 -23 -148 -50 -324 -61 -390 -10 -66 -19 -126 -19 -132 0 -10 32 -13 129 -13 144 0 141 -2 141 82 0 61 7 68 61 68 l49 0 0 -37 c0 -21 3 -55 6 -76 l7 -37 129 0 130 0 -6 28 c-3 15 -21 119 -41 232 -19 113 -50 291 -68 395 l-34 190 -186 3 -187 2 -4 -22z m219 -319 c8 -74 17 -151 20 -172 l5 -38 -47 3 -48 3 3 40 c2 22 12 97 23 167 10 70 19 130 19 134 0 4 2 5 5 2 3 -3 12 -66 20 -139z",fill:"#000"}),(0,s.jsx)("path",{d:"M1800 425 l0 -425 130 0 130 0 0 425 0 425 -130 0 -130 0 0 -425z",fill:"#000"}),(0,s.jsx)("path",{d:"M2829 425 l-65 -425 132 0 132 0 7 75 7 75 48 0 c53 0 59 -9 60 -85 0 -65 2 -66 141 -63 l125 3 -53 305 c-29 168 -62 358 -74 423 l-21 117 -187 0 -186 0 -66 -425z m280 105 c6 -58 13 -133 17 -167 l7 -63 -47 0 c-30 0 -46 4 -46 13 0 20 42 311 47 327 8 22 11 6 22 -110z",fill:"#000"})]})})},o=()=>{let e=(0,l.n)(),a=(0,i.B)(),t=(0,r.r)(),o=(0,n.useMemo)(()=>e.menuList,[e.menuList]),[d,u]=(0,n.useState)(""),[m,h]=(0,n.useState)([]),p=t=>{e.menuList=e.menuList.map(e=>({...e,menu:e.menu.map(e=>e.menuId===t.menuId?{...e,fav:!e.fav}:e)}));let s=a.favList.findIndex(e=>e.menuId===t.menuId);-1!==s?a.favList.splice(s,1):a.favList.push(t)},v=e=>{a.path=e.path,t.push({pathname:e.path,query:{}})},x=()=>{t.push({pathname:"/",query:{}})},j=e=>{t.push({pathname:e.path,query:{}})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{id:"header",className:a.menuActive?"menuOn":"",children:[(0,s.jsx)("div",{className:"btnMenu",onClick:()=>{a.setMenuActive(!a.menuActive)},children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{}),(0,s.jsx)("li",{}),(0,s.jsx)("li",{})]})}),(0,s.jsxs)("ul",{className:"userInfo",children:[(0,s.jsx)("li",{className:"name",children:(0,s.jsxs)("b",{children:[(0,s.jsx)("span",{className:"icon user",children:""}),e.userInfo.userName,"님"]})}),(0,s.jsx)("li",{className:"btn",children:(0,s.jsx)("u",{onClick:()=>e.logout(),style:{cursor:"pointer"},children:"로그아웃"})})]}),(0,s.jsxs)("div",{className:"tab",children:[(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{className:"/main"===a.path?"active":"",children:(0,s.jsx)("span",{className:"icon home",onClick:x,children:""})}),a.favList.map(e=>(0,s.jsxs)("li",{className:a.path===e.path?"active":"",children:[(0,s.jsx)("span",{className:"name",onClick:()=>j(e),children:e.menuName}),(0,s.jsx)("span",{className:"icon close",onClick:()=>p(e),children:""})]},e.menuId))]}),(0,s.jsx)("span",{className:"icon closeAll",onClick:()=>{window.confirm("즐겨찾기를 모두 지우시겠습니까?")&&(a.favList=[])},children:""})]})]}),(0,s.jsxs)("div",{id:"side",className:a.menuActive?"menuOn":"",children:[(0,s.jsx)("h1",{onClick:x,children:(0,s.jsx)(c,{})}),(0,s.jsx)("div",{className:"search",children:(0,s.jsx)("input",{value:d,onChange:e=>u(e.target.value),onInput:()=>{let e=d.trim().toLowerCase();e?h(o.flatMap(e=>e.menu).filter(a=>a.menuName.toLowerCase().includes(e))):h([])},placeholder:"메뉴 검색"})}),(0,s.jsxs)("div",{className:"wrap",children:[m.length>0&&(0,s.jsx)("div",{className:"searchList",children:(0,s.jsx)("ul",{children:m.map((e,t)=>(0,s.jsxs)("li",{onClick:()=>v(e),className:a.path===e.path?"active":"",children:[(0,s.jsx)("span",{className:"icon pre",dangerouslySetInnerHTML:{__html:e.icon}}),(0,s.jsx)("span",{className:"name",children:e.menuName}),(0,s.jsx)("span",{className:"icon fav ".concat(e.fav?"on":""),onClick:()=>p(e),children:""})]},t))})}),o.map((e,t)=>{var n;return(0,s.jsxs)("div",{className:"menu ".concat(e.active?"on":""),style:{display:0===m.length?"block":"none"},children:[(0,s.jsx)("h2",{children:e.path}),(0,s.jsx)("ul",{children:null===(n=e.menu)||void 0===n?void 0:n.map((e,t)=>(0,s.jsxs)("li",{onClick:()=>v(e),className:a.path===e.path?"active":"",children:[(0,s.jsx)("span",{className:"icon pre",dangerouslySetInnerHTML:{__html:e.icon}}),(0,s.jsx)("span",{className:"name",children:e.menuName}),(0,s.jsx)("span",{className:"icon fav ".concat(e.fav?"on":""),onClick:()=>p(e),children:""})]},t))})]},t)})]})]})]})}},2001:(e,a,t)=>{"use strict";t.d(a,{D:()=>c});var s=t(2651);let{startLoading:n,stopLoading:r}=t(9742).A.getState(),l=s.A.create({timeout:1e4,baseURL:"https://ohnae8.mycafe24.com/api"});l.interceptors.request.use(e=>(n(),e),e=>(r(),console.log(e),Promise.reject())),l.interceptors.response.use(e=>{if(r(),200===e.status)return e;Promise.reject()},e=>{var a,t,s;r();let n=null===(a=e.response)||void 0===a?void 0:a.data;return(null===(t=e.response)||void 0===t?void 0:t.status)===401||(null===(s=e.response)||void 0===s?void 0:s.status)===403||n&&n.message,Promise.reject()});var i=t(7876);let c=(e,a)=>{let t=i.A.getState();return l({url:e,data:JSON.stringify(a),method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+(t.token||"not-token")},withCredentials:!1})}},7876:(e,a,t)=>{"use strict";t.d(a,{A:()=>l,n:()=>r});var s=t(9827),n=t(709);let r=(0,s.v)((0,n.Zr)((e,a)=>({active:!1,userInfo:[],codeList:[],menuList:[],token:null,loginSuccess:async a=>{try{e({userInfo:a.userInfo,codeList:a.codeList,menuList:a.menuList,token:a.token})}catch(e){console.error("Error fetching data from database:",e)}},loginFail:async()=>{},logout:async()=>{window.location.href="/login"},getUserInfo:()=>a().userInfo}),{name:"auth-storage"})),l=r},9742:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9827).v)((e,a)=>({loading:!1,target:"",startLoading:a=>{e(()=>({loading:!0,target:a&&a.target?a.target:""}))},stopLoading:()=>{e(()=>({loading:!1,initLoading:!1,target:""}))}}))},2838:(e,a,t)=>{"use strict";t.d(a,{A:()=>c,B:()=>i});var s=t(1455),n=t.n(s),r=t(9827),l=t(287);let i=(0,r.v)((e,a)=>({tabIndex:0,favList:[],menuActive:!1,path:"",userId:l.Ay.load("userId")||"",setTabIndex:a=>{e({tabIndex:a})},setUserId:a=>{l.Ay.save("userId",a,{path:"/",expires:n()().add(30,"day").toDate()}),e({userId:a})},setMenuActive:a=>{e({menuActive:a})}})),c=i}},e=>{var a=a=>e(e.s=a);e.O(0,[647,108,651,759,441,517,358],()=>a(1243)),_N_E=e.O()}]);