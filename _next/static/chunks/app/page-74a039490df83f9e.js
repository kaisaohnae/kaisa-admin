(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{41243:(e,t,a)=>{Promise.resolve().then(a.bind(a,46257))},46257:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(95155),o=a(12115),s=a(2001);class n{async dashboard(e){return(await (0,s.D)("/common/dashboard",e||{})).data}async calendar(e){return(await (0,s.D)("/common/calendar",e||{})).data}}let i=new n;var d=a(76472),l=a(35781);l.t1.register(...l.$L);let c=()=>{let[e,t]=(0,o.useState)({monthlyData:Array.from({length:12},(e,t)=>({reserveMonth:(t+1).toString().padStart(2,"0"),sumPrice:0})),orderStateData:[{orderStateCount:0,orderStateCode:"예약중"},{orderStateCount:0,orderStateCode:"예약취소"},{orderStateCount:0,orderStateCode:"결제취소"},{orderStateCount:0,orderStateCode:"결제완료"}],totalPrice:0});(0,o.useEffect)(()=>{(async()=>{try{let e=await i.dashboard({});t({totalPrice:e.totalPrice,monthlyData:e.monthlyData,orderStateData:e.orderStateData})}catch(e){console.error(e)}})()},[]);let a=t=>{let a=e.orderStateData.find(e=>e.orderStateCode===t);return a?a.orderStateCount:0},s=(0,o.useMemo)(()=>({labels:e.monthlyData.map(e=>e.reserveMonth),datasets:[{label:"매출",data:e.monthlyData.map(e=>e.sumPrice),borderColor:"#9f7aea",backgroundColor:"rgba(159, 122, 234, 0.5)",fill:!0}]}),[e.monthlyData]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{id:"main",children:[(0,r.jsx)("ul",{className:"orderState",children:["예약중","예약취소","결제취소","결제완료"].map(e=>(0,r.jsxs)("li",{className:e,children:[(0,r.jsx)("p",{className:"codeName",children:e}),(0,r.jsx)("p",{className:"count",children:a(e)})]},e))}),(0,r.jsx)("div",{style:{width:"100%",padding:"10px 0 20px 0",overflow:"auto"},children:(0,r.jsx)(d.N1,{data:s,options:{responsive:!0,maintainAspectRatio:!1}})}),(0,r.jsxs)("div",{className:"totalPrice",children:["총 매출: ",e.totalPrice]})]})})}},2001:(e,t,a)=>{"use strict";a.d(t,{D:()=>d});var r=a(82651);let{startLoading:o,stopLoading:s}=a(19742).A.getState(),n=r.A.create({timeout:1e4,baseURL:"https://ohnae8.mycafe24.com/api"});n.interceptors.request.use(e=>(o(),e),e=>(s(),console.log(e),Promise.reject())),n.interceptors.response.use(e=>{if(s(),200===e.status)return e;Promise.reject()},e=>{var t,a,r;s();let o=null===(t=e.response)||void 0===t?void 0:t.data;return((null===(a=e.response)||void 0===a?void 0:a.status)===401||(null===(r=e.response)||void 0===r?void 0:r.status)===403)&&(window.location.href="/login"),o&&o.message,Promise.reject()});var i=a(7876);let d=(e,t)=>{let a=i.A.getState();return n({url:e,data:JSON.stringify(t),method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+(a.token||"not-token")},withCredentials:!1})}},7876:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,n:()=>s});var r=a(99827),o=a(60709);let s=(0,r.v)((0,o.Zr)((e,t)=>({active:!1,userInfo:[],codeList:[],menuList:[],token:null,loginSuccess:async t=>{try{e({userInfo:t.userInfo,codeList:t.codeList,menuList:t.menuList,token:t.token})}catch(e){console.error("Error fetching data from database:",e)}},loginFail:async()=>{},logout:async()=>{window.location.href="/login"},getUserInfo:()=>t().userInfo}),{name:"auth-storage"})),n=s},19742:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(99827).v)((e,t)=>({loading:!1,target:"",startLoading:t=>{e(()=>({loading:!0,target:t&&t.target?t.target:""}))},stopLoading:()=>{e(()=>({loading:!1,initLoading:!1,target:""}))}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[647,613,759,441,517,358],()=>t(41243)),_N_E=e.O()}]);