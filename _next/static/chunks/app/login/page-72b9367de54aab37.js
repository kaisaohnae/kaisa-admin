(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1827:(e,t,r)=>{Promise.resolve().then(r.bind(r,6677))},6677:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(5155),a=r(2115),n=r(7631),l=r(2651);let{startLoading:o,stopLoading:i}=r(9742).A.getState(),d=l.A.create({timeout:1e4,baseURL:"https://ohnae8.mycafe24.com/api"});d.interceptors.request.use(e=>(o(),e),e=>(i(),console.log(e),Promise.reject())),d.interceptors.response.use(e=>{if(i(),200===e.status)return e;Promise.reject()},e=>{var t,r,s;i();let a=null===(t=e.response)||void 0===t?void 0:t.data;return(null===(r=e.response)||void 0===r?void 0:r.status)===401||(null===(s=e.response)||void 0===s?void 0:s.status)===403||a&&a.message,Promise.reject()});let c=(e,t)=>d({url:e,data:JSON.stringify(t),method:"post",headers:{"Content-Type":"application/json"},withCredentials:!1});class u{async login(e){return(await c("/login",e)).data}}let h=new u;var g=r(1455),m=r.n(g),p=r(9827),I=r(287);let v=(0,p.v)((e,t)=>({tabIndex:0,favList:[],menuActive:!1,path:"",userId:I.Ay.load("userId")||"",setTabIndex:t=>{e({tabIndex:t})},setUserId:t=>{I.Ay.save("userId",t,{path:"/",expires:m()().add(30,"day").toDate()}),e({userId:t})}})),b=(0,p.v)((e,t)=>({active:!1,userInfo:JSON.parse(localStorage.getItem("userInfo")||"{}"),codeList:JSON.parse(localStorage.getItem("codeList")||"{}"),menuList:JSON.parse(localStorage.getItem("menuList")||"{}"),token:localStorage.getItem("token"),loginSuccess:async t=>{try{e({userInfo:t.userInfo}),console.log(v.getState())}catch(e){console.error("Error fetching data from database:",e)}},loginFail:async()=>{},getUserInfo:()=>t().userInfo}));var x=r(4492);function f(){let e=v(),t=b(),r=(0,x.A)(),l=(0,n.r)(),[o,i]=(0,a.useState)({userId:"",pwd:"",remember:!1});(0,a.useEffect)(()=>{i(t=>({...t,userId:e.userId}))},[e.userId]);let d=e=>{let{name:t,value:r,type:s,checked:a}=e.target;i(e=>({...e,[t]:"checkbox"===s?a:r}))},c=async s=>{s.preventDefault(),o.remember?e.userId=o.userId:e.userId="";try{let e=await h.login(o);e?(t.loginSuccess(e.data),l.push({pathname:"/main",query:{}})):(t.loginFail(),r.open({title:null,message:"회원정보와 일치하지 않습니다."}))}catch(e){console.error(e)}};return(0,s.jsx)("div",{id:"login",children:(0,s.jsx)("form",{onSubmit:c,method:"POST",children:(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("legend",{children:"로그인"}),(0,s.jsx)("h1",{children:"관리자 로그인"}),(0,s.jsxs)("label",{className:"label",children:[(0,s.jsx)("span",{className:"icon",children:""}),(0,s.jsx)("input",{type:"text",name:"userId",value:o.userId,onChange:d,placeholder:"아이디를 입력해주세요",required:!0})]}),(0,s.jsxs)("label",{className:"label",children:[(0,s.jsx)("span",{className:"icon",children:""}),(0,s.jsx)("input",{type:"password",name:"pwd",value:o.pwd,onChange:d,placeholder:"비밀번호를 입력해주세요",required:!0})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",name:"remember",checked:o.remember,onChange:d}),(0,s.jsx)("span",{className:"remember",children:" 아이디 저장"})]}),(0,s.jsx)("button",{type:"submit",children:"로그인"})]})})})}},7631:(e,t,r)=>{"use strict";r.d(t,{r:()=>a});var s=r(6046);let a=()=>{let{push:e,...t}=(0,s.useRouter)(),r=(0,s.useSearchParams)();return{...t,push:t=>{let{pathname:s,query:a}=t;a||(a={});let n=r.get("o");n&&(a.o=n);let l=r.get("r");l&&(a.r=l);let o=new URLSearchParams(a).toString();e("".concat(s,"?").concat(o))}}}},4492:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9827).v)(e=>({alert:null,error:!1,showAlert:t=>{e(()=>({alert:t}))},hideAlert:()=>{e(()=>({alert:null}))},showError:()=>{e(()=>({error:!0}))},hideError:()=>{e(()=>({error:!1}))}}))},9742:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9827).v)((e,t)=>({loading:!1,target:"",startLoading:t=>{e(()=>({loading:!0,target:t&&t.target?t.target:""}))},stopLoading:()=>{e(()=>({loading:!1,initLoading:!1,target:""}))}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[84,441,517,358],()=>t(1827)),_N_E=e.O()}]);