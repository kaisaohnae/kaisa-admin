(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1827:(e,t,s)=>{Promise.resolve().then(s.bind(s,7536))},7536:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(5155),a=s(2115),n=s(7631),o=s(2001);class l{async login(e){return(await (0,o.D)("/login",e)).data}}let i=new l;var d=s(2838),c=s(7876),u=s(4492);function h(){let e=(0,d.A)(),t=(0,c.A)(),s=(0,u.A)(),o=(0,n.r)(),[l,h]=(0,a.useState)({userId:"",pwd:"",remember:!1});(0,a.useEffect)(()=>{h(t=>({...t,userId:e.userId}))},[e.userId]);let m=e=>{let{name:t,value:s,type:r,checked:a}=e.target;h(e=>({...e,[t]:"checkbox"===r?a:s}))},g=async r=>{r.preventDefault(),l.remember?e.userId=l.userId:e.userId="";try{let e=await i.login(l);e?(t.loginSuccess(e.data),o.push({pathname:"/",query:{}})):(t.loginFail(),s.open({title:null,message:"회원정보와 일치하지 않습니다."}))}catch(e){console.error(e)}};return(0,r.jsx)("div",{id:"login",children:(0,r.jsx)("form",{onSubmit:g,method:"POST",children:(0,r.jsxs)("fieldset",{children:[(0,r.jsx)("legend",{children:"로그인"}),(0,r.jsx)("h1",{children:"관리자 로그인"}),(0,r.jsxs)("label",{className:"label",children:[(0,r.jsx)("span",{className:"icon",children:""}),(0,r.jsx)("input",{type:"text",name:"userId",value:l.userId,onChange:m,placeholder:"아이디를 입력해주세요",required:!0})]}),(0,r.jsxs)("label",{className:"label",children:[(0,r.jsx)("span",{className:"icon",children:""}),(0,r.jsx)("input",{type:"password",name:"pwd",value:l.pwd,onChange:m,placeholder:"비밀번호를 입력해주세요",required:!0})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",name:"remember",checked:l.remember,onChange:m}),(0,r.jsx)("span",{className:"remember",children:" 아이디 저장"})]}),(0,r.jsx)("button",{type:"submit",children:"로그인"})]})})})}},7631:(e,t,s)=>{"use strict";s.d(t,{r:()=>a});var r=s(6046);let a=()=>{let{push:e,...t}=(0,r.useRouter)(),s=(0,r.useSearchParams)();return{...t,push:t=>{let{pathname:r,query:a}=t;a||(a={});let n=s.get("o");n&&(a.o=n);let o=s.get("r");o&&(a.r=o);let l=new URLSearchParams(a).toString();e("".concat(r,"?").concat(l))}}}},2001:(e,t,s)=>{"use strict";s.d(t,{D:()=>i});var r=s(2651);let{startLoading:a,stopLoading:n}=s(9742).A.getState(),o=r.A.create({timeout:1e4,baseURL:"https://ohnae8.mycafe24.com/api"});o.interceptors.request.use(e=>(a(),e),e=>(n(),console.log(e),Promise.reject())),o.interceptors.response.use(e=>{if(n(),200===e.status)return e;Promise.reject()},e=>{var t,s,r;n();let a=null===(t=e.response)||void 0===t?void 0:t.data;return((null===(s=e.response)||void 0===s?void 0:s.status)===401||(null===(r=e.response)||void 0===r?void 0:r.status)===403)&&(window.location.href="/login"),a&&a.message,Promise.reject()});var l=s(7876);let i=(e,t)=>{let s=l.A.getState();return o({url:e,data:JSON.stringify(t),method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+(s.token||"not-token")},withCredentials:!1})}},4492:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9827).v)(e=>({alert:null,error:!1,show:t=>{e(()=>({alert:t}))},hide:()=>{e(()=>({alert:null}))}}))},7876:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,n:()=>n});var r=s(9827),a=s(709);let n=(0,r.v)((0,a.Zr)((e,t)=>({active:!1,userInfo:[],codeList:[],menuList:[],token:null,loginSuccess:async t=>{try{e({userInfo:t.userInfo,codeList:t.codeList,menuList:t.menuList,token:t.token})}catch(e){console.error("Error fetching data from database:",e)}},loginFail:async()=>{},logout:async()=>{window.location.href="/login"},getUserInfo:()=>t().userInfo}),{name:"auth-storage"})),o=n},9742:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9827).v)((e,t)=>({loading:!1,target:"",startLoading:t=>{e(()=>({loading:!0,target:t&&t.target?t.target:""}))},stopLoading:()=>{e(()=>({loading:!1,initLoading:!1,target:""}))}}))},2838:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,B:()=>i});var r=s(1455),a=s.n(r),n=s(9827),o=s(287),l=s(709);let i=(0,n.v)((0,l.Zr)((e,t)=>({tabIndex:0,favList:[],menuActive:!1,path:"",userId:o.Ay.load("userId")||"",setTabIndex:t=>{e({tabIndex:t})},setUserId:t=>{o.Ay.save("userId",t,{path:"/",expires:a()().add(30,"day").toDate()}),e({userId:t})},setMenuActive:t=>{e({menuActive:t})},getFavList:()=>t().favList,setFavList:t=>{e({favList:t})}}),{name:"setting-storage"})),d=i}},e=>{var t=t=>e(e.s=t);e.O(0,[108,651,441,517,358],()=>t(1827)),_N_E=e.O()}]);