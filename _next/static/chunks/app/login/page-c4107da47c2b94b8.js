(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1827:(e,t,s)=>{Promise.resolve().then(s.bind(s,6677))},6677:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(5155),a=s(2115),n=s(6934),l=s(6046),o=s(2651);let{startLoading:i,stopLoading:c}=s(9742).A.getState(),d=o.A.create({timeout:1e4,baseURL:"https://ohnae8.mycafe24.com/api"});d.interceptors.request.use(e=>(i(),e),e=>(c(),console.log(e),Promise.reject())),d.interceptors.response.use(e=>{if(c(),200===e.status)return e;Promise.reject()},e=>{var t,s,r;c();let a=null===(t=e.response)||void 0===t?void 0:t.data;return(null===(s=e.response)||void 0===s?void 0:s.status)===401||(null===(r=e.response)||void 0===r?void 0:r.status)===403||a&&a.message,Promise.reject()});let u=(e,t)=>d({url:e,data:JSON.stringify(t),method:"post",headers:{"Content-Type":"application/json"},withCredentials:!1});class g{async login(e){return(await u("/login",e)).data}}let h=new g;var m=s(9827),p=s(287);let v={id:"",menu:{active:!1},hash:"",tab:{idx:0},favList:[]},f=(0,m.v)(e=>{let t=p.Ay.load("settings"),s=t?JSON.parse(t):v;return{settings:s,setState:()=>{let t=JSON.stringify(s);p.Ay.save("settings",t,{path:"/"}),e({settings:s})}}}),b=(0,m.v)((e,t)=>({active:!1,userInfo:JSON.parse(localStorage.getItem("userInfo")||"{}"),codeList:JSON.parse(localStorage.getItem("codeList")||"{}"),menuList:JSON.parse(localStorage.getItem("menuList")||"{}"),token:localStorage.getItem("token"),loginSuccess:async t=>{try{e({userInfo:t.userInfo}),console.log(f.getState())}catch(e){console.error("Error fetching data from database:",e)}},loginFail:async()=>{},getUserInfo:()=>t().userInfo}));var S=s(4492);function j(){let[e,t,s]=(0,n.lT)(["settings"]),o=f(),i=b(),c=(0,S.A)();(0,l.useRouter)();let[d,u]=(0,a.useState)({userId:"",pwd:"",remember:!1});(0,a.useEffect)(()=>{e.settings||o.setState(),u(e=>({...e,userId:o.userId}))},[e,o]);let g=e=>{let{name:t,value:s,type:r,checked:a}=e.target;u(e=>({...e,[t]:"checkbox"===r?a:s}))},m=async e=>{e.preventDefault(),d.remember?o.userId=d.userId:o.userId="";try{let e=await h.login(d);e?(o.setState(),i.loginSuccess(e.data)):(i.loginFail(),c.open({title:null,message:"회원정보와 일치하지 않습니다."}))}catch(e){console.error(e)}};return(0,r.jsx)("div",{id:"login",children:(0,r.jsx)("form",{onSubmit:m,method:"POST",children:(0,r.jsxs)("fieldset",{children:[(0,r.jsx)("legend",{children:"로그인"}),(0,r.jsx)("h1",{children:"관리자 로그인"}),(0,r.jsxs)("label",{className:"label",children:[(0,r.jsx)("span",{className:"icon",children:""}),(0,r.jsx)("input",{type:"text",name:"userId",value:d.userId,onChange:g,placeholder:"아이디를 입력해주세요",required:!0})]}),(0,r.jsxs)("label",{className:"label",children:[(0,r.jsx)("span",{className:"icon",children:""}),(0,r.jsx)("input",{type:"password",name:"pwd",value:d.pwd,onChange:g,placeholder:"비밀번호를 입력해주세요",required:!0})]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",name:"remember",checked:d.remember,onChange:g}),(0,r.jsx)("span",{className:"remember",children:" 아이디 저장"})]}),(0,r.jsx)("button",{type:"submit",children:"로그인"})]})})})}},4492:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9827).v)(e=>({alert:null,error:!1,showAlert:t=>{e(()=>({alert:t}))},hideAlert:()=>{e(()=>({alert:null}))},showError:()=>{e(()=>({error:!0}))},hideError:()=>{e(()=>({error:!1}))}}))},9742:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9827).v)((e,t)=>({loading:!1,target:"",startLoading:t=>{e(()=>({loading:!0,target:t&&t.target?t.target:""}))},stopLoading:()=>{e(()=>({loading:!1,initLoading:!1,target:""}))}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[595,441,517,358],()=>t(1827)),_N_E=e.O()}]);